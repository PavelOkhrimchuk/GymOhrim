<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose Date</title>

    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />

    <style>
        #calendar {
            max-width: 500px;
            margin: 0 auto;
            padding: 10px;
        }

        #selectedDateDisplay {
            width: 300px;
            margin: 10px auto;
            display: block;
            text-align: center;
            font-size: 1.2em;
            padding: 5px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

<h1>Select a Date</h1>
<div th:if="${error}" style="color: red;">
    <p th:text="${error}"></p>
</div>
<div id='calendar'></div>


<input type="text" id="selectedDateDisplay" placeholder="Selected date will appear here" readonly />

<form th:action="@{/calendar/submit}" method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <input type="hidden" id="selectedDate" name="selectedDate" required/><br/><br/>
    <button type="submit">Submit</button>
</form>

<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            selectable: true,

            dateClick: function(info) {

                document.getElementById('selectedDate').value = info.dateStr;


                document.getElementById('selectedDateDisplay').value = info.dateStr;
            }
        });

        calendar.render();
    });
</script>

<a href="/profile">Go to Profile</a>
</body>
</html>
